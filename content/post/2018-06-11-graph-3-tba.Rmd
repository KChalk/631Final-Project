
---
title: 'Graph 3: PCA Correlations '
author: ''
date: '2018-06-12'
slug: graph-4-tba
categories: []
tags: []
description: Desc
hacker_news_id: ''
lobsters_id: ''
meta_img: /images/image.jpg
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse) 
library(ggplot2)
#library(ggalt)
library(ggradar)
library(extrafont)
library(ggfortify)
library(infer)
library(forcats)
library(ggridges)
library(here)
library(scales)
library(reshape2)

library(viridis)
library(shiny)
```



## Preliminaries
## Data

All the graphs of this series are generated from data concerning frequency with which words from assorted dictionaries appear in original reddit posts from various subreddits. 

Because `alldicts` is of such high dimensionality-- 65 is a lot of features to keep track of-- I ran principle component analysis (PCA) on the data to reduce the dimensionality to 21 features, while still explaining 90% of the variance within the dataset. The draw back of this approach is that the principle components can be difficult to interpret. Thus, the plots below explore the relationship/correlation between each of these the 21 principle components a the original 65 features. 

```{r}
# original data
nfreqs <- read_csv(here('static','data','redditProject','normal_subset_freqs.csv'))
# data in PCA space
redfreqs <- read_csv(here('static','data','redditProject','reduced_normal_subset_freqs'))

#Orininal dimensionality, # of principle components used
od_num=65
pc_num=21

# Calculate correlation
correlations <- cor(nfreqs[c(2:(od_num+1))],redfreqs[c(2:(pc_num+1))])

#Tidyify
corlong <- melt(correlations ) %>% 
   setNames(c('orig', 'red_dim', 'correlation'))

```


### Audience

In its current form, audience for this project is almost entirely myself and the professors I'm trying to convince to help me with this project. Eventually I hope to research may be of interest to a larger group, including: 

1. Linguists interested in this method of textual analysis and the language of internet forums
1. Computer sciencists interested in the distributed computing or machine learning that went into this project
1. Social scientists studying any of the many social groups involved on reddit. 

## Plot Type: Tiled Correlations

### How to read it and what to look for 
This map is a heat map showing the correlations between the features on each axis. A more common use of this would be, within a a dataset, to show covariance between features. In that version, the features on each axis would be the same and the diagonal would be 1 because the correlation would be complete because they are actually the same values. This plot is following that same theme, and while the same information is represented on both axes, it is after the PCA. The axes tell what features weâ€™re looking at, and the tiles on the map are colored according to their values. In this case, they are colored by the magnitude of correlation.

It has two discrete axes. 

### Presentation Tips
Having a large number on features, on one or both axes, makes it hard to keep track of which box lines up with which feature. To deal with this, we need the relevant values to be close to their label, or some method of highlighting, unless we are able to keep our %%%%? to a manageable number of features.

Presenting values with color is not a high specificity presentation technique. This chart should not be used when actual values are important, as it is better when the goal is to highlight extreme values or patterns.

Representing correlation, I found a color palette with high saturation at the extremes and low saturation in the middle to be the most effective, given that the distance from 0 is slightly more important than direction of correlation. 

### Variations and Alternatives
Slightly more common to illustrate covariation within a data frame. Also used to represent successful and failed categorization (true positives and true negatives). 

## Plot Description
Principal components on the x-axis and features one the y-axis, with tiles colored by correlation. The decision to have original on y and reduced on x is arbitrary. Then I kept the smaller number of values on the x-axis mostly for legibility of the labels. My color scheme ranges from dark purple to dark green with white in the center in order to make values that are far from 0 pop out. I was unable to find a way to highlight specific rows and columns, but that would be a useful addition to the plot. 

### Representaton 
```{r}
ggplot(corlong, aes(x=red_dim, y=orig, fill=correlation))+
  geom_tile()+ 
  theme(axis.text.x = element_text(angle = 60, hjust = 1))+
  scale_fill_distiller(palette = "PRGn")
  #scale_fill_viridis(option='E')

```


### Methods

```{r}
covariances <- read_csv(here('static','data','redditProject','subset_covariance.csv'))
covlong <- gather(covariances, key=newDimension, value=covariance, -X1)

ggplot(covlong, aes(x=newDimension, y=X1, fill=covariance))+
  geom_tile()+
  theme(axis.text.x = element_text(angle = 60, hjust = 1))
```

